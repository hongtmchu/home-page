<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Andrew Heiss">
<meta name="description" content="Tips, tricks, and rationale for converting from a single big BibTeX file to a Zotero database">
<title>How to migrate from BibDesk to Zotero for pandoc-based writing | Andrew Heiss – Andrew Heiss</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../../../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../../../">
<link href="../../../../..//files/favicon-512.png" rel="icon" type="image/png">
<script src="../../../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../../../site_libs/quarto-html/quarto-syntax-highlighting-17c909d5fd25ae21b861c0c7a49b2096.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../../../site_libs/bootstrap/bootstrap-5cd0811f461c8271ae6bab49df9501be.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<link href="../../../../../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../../../../../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script src="../../../../../site_libs/quarto-contrib/iconify-2.0.0/iconify-icon.min.js"></script><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script type="text/javascript">

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-527449-5', 'auto');

ga('send', {
  hitType: 'pageview',
  'anonymizeIp': true,
});
</script><style>

      .quarto-title-block .quarto-title-banner {
        background: #170C3A;
      }
</style>
<meta property="og:title" content="How to migrate from BibDesk to Zotero for pandoc-based writing | Andrew Heiss">
<meta property="og:description" content="Tips, tricks, and rationale for converting from a single big BibTeX file to a Zotero database">
<meta property="og:image" content="https://www.andrewheiss.com/blog/2023/01/08/bibdesk-to-zotero-pandoc/img/zotero-final.png">
<meta property="og:site_name" content="Andrew Heiss">
<meta property="og:locale" content="en_US">
<meta property="og:image:height" content="1706">
<meta property="og:image:width" content="2812">
<meta name="twitter:title" content="How to migrate from BibDesk to Zotero for pandoc-based writing | Andrew Heiss">
<meta name="twitter:description" content="Tips, tricks, and rationale for converting from a single big BibTeX file to a Zotero database">
<meta name="twitter:image" content="https://www.andrewheiss.com/blog/2023/01/08/bibdesk-to-zotero-pandoc/img/zotero-final.png">
<meta name="twitter:creator" content="@andrewheiss">
<meta name="twitter:site" content="@andrewheiss">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image-height" content="1706">
<meta name="twitter:image-width" content="2812">
</head>
<body class="floating nav-fixed slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner"><nav class="navbar navbar-expand-lg " data-bs-theme="dark"><div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../../../index.html">
    <span class="navbar-title">Andrew Heiss</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item">
    <a class="nav-link" href="../../../../../index.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../../cv/index.html"> 
<span class="menu-text">CV</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../../blog/index.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../../research/index.html"> 
<span class="menu-text">Research</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../../teaching/index.html"> 
<span class="menu-text">Teaching</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../../talks/index.html"> 
<span class="menu-text">Talks</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../../now/index.html"> 
<span class="menu-text">Now</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../../uses/index.html"> 
<span class="menu-text">Uses</span></a>
  </li>  
</ul>
<ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item">
    <a class="nav-link" href="../../../../../atom.xml"> 
<span class="menu-text"><iconify-icon inline="" icon="bi:rss" style="font-size: 1.1em;" aria-label="Icon rss from bi Iconify.design set." title="RSS"></iconify-icon></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="mailto:aheiss@gsu.edu"> 
<span class="menu-text"><iconify-icon inline="" icon="bi:envelope" style="font-size: 1.1em;" aria-label="Icon envelope from bi Iconify.design set." title="E-mail"></iconify-icon></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://bsky.app/profile/andrew.heiss.phd" rel="me"> 
<span class="menu-text"><iconify-icon inline="" icon="fa6-brands:bluesky" style="font-size: 1.1em;" aria-label="Icon bluesky from fa6-brands Iconify.design set." title="Bluesky"></iconify-icon></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://fediscience.org/users/andrew/" rel="me"> 
<span class="menu-text"><iconify-icon inline="" icon="bi:mastodon" style="font-size: 1.1em;" aria-label="Icon mastodon from bi Iconify.design set." title="Mastodon"></iconify-icon></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/andrewheiss" rel="me"> 
<span class="menu-text"><iconify-icon inline="" icon="bi:github" style="font-size: 1.1em;" aria-label="Icon github from bi Iconify.design set." title="GitHub"></iconify-icon></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://www.youtube.com/andrewheiss" rel="me"> 
<span class="menu-text"><iconify-icon inline="" icon="bi:youtube" style="font-size: 1.1em;" aria-label="Icon youtube from bi Iconify.design set." title="YouTube"></iconify-icon></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://www.heissatopia.com/"> 
<span class="menu-text"><iconify-icon inline="" icon="fa6-brands:blogger" style="font-size: 1.15em;" aria-label="Icon blogger from fa6-brands Iconify.design set." title="Blogger"></iconify-icon></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://www.linkedin.com/in/andrewheiss" rel="me"> 
<span class="menu-text"><iconify-icon inline="" icon="bi:linkedin" style="font-size: 1.1em;" aria-label="Icon linkedin from bi Iconify.design set." title="LinkedIn"></iconify-icon></span></a>
  </li>  
</ul>
</div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><header id="title-block-header" class="quarto-title-block default blog-post page-columns page-full"><div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <div class="quarto-title-block"><div><h1 class="title">How to migrate from BibDesk to Zotero for pandoc-based writing</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
                  <div>
        <div class="description">
          Tips, tricks, and rationale for converting from a single big BibTeX file to a Zotero database
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">writing</div>
                <div class="quarto-category">markdown</div>
                <div class="quarto-category">citations</div>
                <div class="quarto-category">pandoc</div>
                <div class="quarto-category">zotero</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p><a href="https://www.andrewheiss.com/">Andrew Heiss</a> <a href="https://orcid.org/0000-0002-3948-3914" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">Sunday, January 8, 2023</p>
      </div>
    </div>
    
      
      <div>
      <div class="quarto-title-meta-heading">Doi</div>
      <div class="quarto-title-meta-contents">
        <p class="doi">
          <a href="https://doi.org/10.59350/cwrq4-m7h10">10.59350/cwrq4-m7h10</a>
        </p>
      </div>
    </div>
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Contents</h2>
   
  <ul>
<li><a href="#my-longstanding-workflow-for-writing-citing-and-pdf-management" id="toc-my-longstanding-workflow-for-writing-citing-and-pdf-management" class="nav-link active" data-scroll-target="#my-longstanding-workflow-for-writing-citing-and-pdf-management">My longstanding workflow for writing, citing, and PDF management</a></li>
  <li>
<a href="#why-switch-away-from-bibtex-and-bibdesk" id="toc-why-switch-away-from-bibtex-and-bibdesk" class="nav-link" data-scroll-target="#why-switch-away-from-bibtex-and-bibdesk">Why switch away from BibTeX and BibDesk?</a>
  <ul class="collapse">
<li><a href="#problem-1-cross-device-reading" id="toc-problem-1-cross-device-reading" class="nav-link" data-scroll-target="#problem-1-cross-device-reading">Problem 1: Cross-device reading</a></li>
  <li><a href="#problem-2-collaboration-across-many-projects-with-many-coauthors" id="toc-problem-2-collaboration-across-many-projects-with-many-coauthors" class="nav-link" data-scroll-target="#problem-2-collaboration-across-many-projects-with-many-coauthors">Problem 2: Collaboration across many projects with many coauthors</a></li>
  <li><a href="#problem-3-bibtex-was-designed-for-latexbut-just-latex" id="toc-problem-3-bibtex-was-designed-for-latexbut-just-latex" class="nav-link" data-scroll-target="#problem-3-bibtex-was-designed-for-latexbut-just-latex">Problem 3: BibTeX was designed for LaTeX—but just LaTeX</a></li>
  <li><a href="#the-solution-zotero" id="toc-the-solution-zotero" class="nav-link" data-scroll-target="#the-solution-zotero">The solution: Zotero</a></li>
  </ul>
</li>
  <li>
<a href="#preparing-for-the-migration" id="toc-preparing-for-the-migration" class="nav-link" data-scroll-target="#preparing-for-the-migration">Preparing for the migration</a>
  <ul class="collapse">
<li><a href="#make-a-backup" id="toc-make-a-backup" class="nav-link" data-scroll-target="#make-a-backup">Make a backup</a></li>
  <li><a href="#install-extensions" id="toc-install-extensions" class="nav-link" data-scroll-target="#install-extensions">Install extensions</a></li>
  <li><a href="#ratings-and-read-status" id="toc-ratings-and-read-status" class="nav-link" data-scroll-target="#ratings-and-read-status">Ratings and read status</a></li>
  <li><a href="#files" id="toc-files" class="nav-link" data-scroll-target="#files">Files</a></li>
  <li><a href="#citekeys" id="toc-citekeys" class="nav-link" data-scroll-target="#citekeys">Citekeys</a></li>
  </ul>
</li>
  <li>
<a href="#post-import-tweaks" id="toc-post-import-tweaks" class="nav-link" data-scroll-target="#post-import-tweaks">Post-import tweaks</a>
  <ul class="collapse">
<li><a href="#ratings-and-read-status-1" id="toc-ratings-and-read-status-1" class="nav-link" data-scroll-target="#ratings-and-read-status-1">Ratings and read status</a></li>
  <li><a href="#tags-to-collections" id="toc-tags-to-collections" class="nav-link" data-scroll-target="#tags-to-collections">Tags to collections</a></li>
  <li><a href="#incollection-inbook-and-crossref" id="toc-incollection-inbook-and-crossref" class="nav-link" data-scroll-target="#incollection-inbook-and-crossref"><code>incollection</code> / <code>inbook</code> and <code>crossref</code></a></li>
  <li><a href="#all-done" id="toc-all-done" class="nav-link" data-scroll-target="#all-done">All done!</a></li>
  </ul>
</li>
  <li>
<a href="#example-workflow-with-quarto-r-markdown-pandoc" id="toc-example-workflow-with-quarto-r-markdown-pandoc" class="nav-link" data-scroll-target="#example-workflow-with-quarto-r-markdown-pandoc">Example workflow with Quarto / R Markdown / pandoc</a>
  <ul class="collapse">
<li><a href="#export-collection-to-.bib-file" id="toc-export-collection-to-.bib-file" class="nav-link" data-scroll-target="#export-collection-to-.bib-file">Export collection to <code>.bib</code> file</a></li>
  <li><a href="#point-the-.qmd-.rmd-.md-to-the-exported-file" id="toc-point-the-.qmd-.rmd-.md-to-the-exported-file" class="nav-link" data-scroll-target="#point-the-.qmd-.rmd-.md-to-the-exported-file">Point the <code>.qmd</code> / <code>.Rmd</code> / <code>.md</code> to the exported file</a></li>
  <li><a href="#cite-things" id="toc-cite-things" class="nav-link" data-scroll-target="#cite-things">Cite things</a></li>
  <li><a href="#rstudio-based-alternative" id="toc-rstudio-based-alternative" class="nav-link" data-scroll-target="#rstudio-based-alternative">RStudio-based alternative</a></li>
  </ul>
</li>
  </ul></nav>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block page-columns page-full" id="quarto-document-content"><section id="my-longstanding-workflow-for-writing-citing-and-pdf-management" class="level2"><h2 class="anchored" data-anchor-id="my-longstanding-workflow-for-writing-citing-and-pdf-management">My longstanding workflow for writing, citing, and PDF management</h2>
<p>When I started my first master’s degree program in 2008, I decided to stop using Word for all my academic writing and instead use plain text Markdown for everything. <a href="https://en.wikipedia.org/wiki/Markdown">Markdown</a> itself had been a thing for 4 years, and <a href="https://fletcherpenney.net/multimarkdown/">MultiMarkdown</a>—a <a href="https://en.wikipedia.org/wiki/Pandoc">pandoc</a>-like extension of Markdown that could handle BibTeX bibliographies—was brand new. I did all my writing for my courses and my thesis in Markdown and converted it all to PDF through LaTeX using MultiMarkdown. I didn’t know about pandoc yet, so I only ever converted to PDF, not HTML or Word.</p>
<p>I stored all my bibliographic references in a tiny little <code>references.bib</code> BibTeX file that I managed with <a href="https://bibdesk.sourceforge.io/">BibDesk</a>. BibDesk is a wonderful and powerful program with an active developer community and it does all sorts of neat stuff like auto-filing PDFs, importing references from DOIs, searching for references on the internet from inside the program, and just providing a nice overall front end for dealing with BibTeX files.</p>
<p>I kept using my MultiMarkdown + LaTeX output system throughout my second master’s degree, and my <code>references.bib</code> file and PDF database slowly grew. R Markdown hadn’t been invented yet and I still hadn’t discovered pandoc, so living in a mostly LaTeX-based world was fine.</p>
<p>When I started my PhD in 2012, something revolutionary happened: <a href="https://yihui.org/knitr/">the {knitr} package</a> was invented. The new <a href="https://rmarkdown.rstudio.com/">R Markdown</a> format let you to mix R code with Markdown text and create multiple outputs (HTML, LaTeX, and docx) through pandoc. I abandoned MultiMarkdown and fully converted to pandoc (thanks also in part to Kieran Healy’s <a href="https://plain-text.co/"><em>Plain Person’s Gide to Plain Text Social Science</em></a>). Since 2012, I’ve written exclusively in pandoc-flavored Markdown and always make sure that I can convert everything to PDF, HTML, and Word (see the “Manuscript” entry <a href="https://stats.andrewheiss.com/cautioning-canary/">in the navigation bar here</a>, for instance, where you can download the preprint version of that paper in a ton of different formats). I recently converted <a href="https://github.com/andrewheiss/hikmah-academic-quarto">a bunch of my output templates</a> to <a href="https://quarto.org/">Quarto pandoc</a> too.</p>
<p>During all this time, I didn’t really keep up with other reference managers. I used super early <a href="https://www.zotero.org/">Zotero</a> as an undergrad back in 2006–2008, but it didn’t fit well with my Markdown-based workflow, so I kind of ignored it. I picked it up again briefly at the beginning of my PhD, but I couldn’t get it to play nicely with R Markdown and pandoc, so I kept using trusty old BibDesk. My <code>references.bib</code> file got bigger and bigger as I took more and more doctoral classes and did more research, but BibDesk handled the growing library just fine. As of today, I’ve got 1,400 items in there with nearly 1,000 PDFs, and everything still works great—mostly.</p>
</section><section id="why-switch-away-from-bibtex-and-bibdesk" class="level2"><h2 class="anchored" data-anchor-id="why-switch-away-from-bibtex-and-bibdesk">Why switch away from BibTeX and BibDesk?</h2>
<p>BibDesk got me through my dissertation and all my research projects up until now, so why consider switching away to some other system? Over the past few years, as I’ve done more reading on my iPad and worked on more coauthored projects, I’ve run into a few pain points in my citation workflow.</p>
<section id="problem-1-cross-device-reading" class="level3"><h3 class="anchored" data-anchor-id="problem-1-cross-device-reading">Problem 1: Cross-device reading</h3>
<p>I enjoy reading PDFs on my iPad (particularly in the <a href="https://www.folia.com/iannotate">iAnnotate app</a>), but getting PDFs from BibDesk onto the iPad has always required a bizarre dance:</p>
<ol type="1">
<li>Store <code>references.bib</code> and the BibDesk-managed folder of PDFs in Dropbox</li>
<li>Use the <a href="https://sites.google.com/site/appsformaths/references">References</a> iPad app to open the BibTeX file from Dropbox on the iPad</li>
<li>Use iAnnotate to navigate Dropbox and find the PDF I want to read</li>
<li>Read and annotate the PDF in iAnnotate</li>
<li>Send the finished PDF from iAnnotate back to Dropbox and go back to References to ensure that the annotated PDF updates</li>
</ol>
<p>I’d often get sick of this convoluted process and just find the PDF on my computer and AirDrop it to my iPad directly, completely circumventing Dropbox. I’d then AirDrop it back to my computer and attach the marked up PDF to the reference in BibDesk. It’s inconvenient, but less inconvenient than bouncing around a bunch of different apps and hoping everything works.</p>
</section><section id="problem-2-collaboration-across-many-projects-with-many-coauthors" class="level3"><h3 class="anchored" data-anchor-id="problem-2-collaboration-across-many-projects-with-many-coauthors">Problem 2: Collaboration across many projects with many coauthors</h3>
<p>Collaboration with a single huge <code>references.bib</code> file is impossible. I could share my Dropbox folder with coauthors, but then they’d see all my entries and have access to all my annotated PDFs, which seems like overkill. As I started working with coauthors, I decided to make smaller project-specific <code>.bib</code> files that would be shareable and editable.</p>
<p>This is great for project modularity—see how <a href="https://github.com/andrewheiss/cautioning-canary/blob/master/manuscript/bibliography.bib">this <code>bibliography.bib</code> file</a> only contains things we cited? But it caused <em>major</em> synchronization problems. If me or a coauthor makes any edits to the project-specific files (adding a DOI to an existing entry, adding a new entry, etc.), those changes don’t show up in my big master <code>references.bib</code> file. I have to remember to copy those changes to the main file, and I never remember. With some recent projects, I’ve actually been copying some entries from previous projects’ <code>.bib</code> files rather than from the big <code>references.bib</code> file. Everything’s diverging and it’s a pain.</p>
</section><section id="problem-3-bibtex-was-designed-for-latexbut-just-latex" class="level3"><h3 class="anchored" data-anchor-id="problem-3-bibtex-was-designed-for-latexbut-just-latex">Problem 3: BibTeX was designed for LaTeX—but just LaTeX</h3>
<p>BibTeX works great with LaTeX. That’s why it was invented in the first place! The fact that things like pandoc work with it is partially a historical accident—<code>.bib</code> files were a convenient and widely used plain text bibliography format, so pandoc and MultiMarkdown used BibTeX for citations.</p>
<p>But citations are often more complicated than BibTeX can handle. Consider the LaTeX package <a href="https://ctan.org/pkg/biblatex-chicago?lang=en">biblatex-chicago</a>—in order to be fully compliant with all the intricacies of the Chicago Manual of Style, it has to expand the BibTeX (technically BibLaTeX) format to include fields like <code>entrysubtype</code> for distinguishing between magazine/newspaper articles and journal articles, among dozens of other customizations and tweaks. BibTeX has a limited set of entry types, and anything that’s not one of those types gets shoehorned into the <code>misc</code> type.</p>
<p>Internally, programs like pandoc that can read BibTeX files convert them into a standard <a href="https://en.wikipedia.org/wiki/Citation_Style_Language">Citation Style Language (CSL)</a> format, which it then uses to format references as Chicago, APA, MLA, or whatever. It would be great to store all my citations in a CSL-compliant format in the first place rather than as a LaTeX-only format that has to be constantly converted on-the-fly when converting to any non-LaTeX output.</p>
</section><section id="the-solution-zotero" class="level3"><h3 class="anchored" data-anchor-id="the-solution-zotero">The solution: Zotero</h3>
<p>Zotero conveniently fixes all these issues:</p>
<ol type="1">
<li><p>It has <a href="https://www.zotero.org/support/sync">a synchronization service</a> that works across platforms (including iOS). <a href="https://ikashnitsky.github.io/2019/zotero/">It can work with Dropbox too</a> if you don’t want to be bound by their file size limit or pay for extra storage, though I ended up paying for storage to (1) support open source software and (2) not have to deal with multiple programs. I’ve been doing the BibDesk → iAnnotate → Dropbox → MacBook → AirDrop dance for too many years—I just want Zotero to handle all the syncing for me.</p></li>
<li>
<p>It’s <strong>super easy</strong> to collaborate with Zotero. You can create shared group libraries with different sets of coauthors and not worry about Dropbox synchronization issues or accidental deletion of <code>}</code> characters in the <code>.bib</code> file. For one of my reading-intensive class, <a href="https://compasp23.classes.andrewheiss.com/class/">I’ve even created a shared Zotero group library</a> that all the students can join and cite from, which is neat.</p>
<p>It’s also far easier to maintain a master list of references. You can create a <a href="https://www.zotero.org/support/collections_and_tags">Zotero collection</a> for specific projects, and items can live in multiple collections. Editing an item in one collection updates that item in all other collections. Zotero treats collections like iTunes/Apple Music playlists—just like songs can belong to multiple playlists, bibliographic entries can belong to multiple collections.</p>
</li>
<li><p>Zotero follows the CSL standard that pandoc uses. It was the first program to adopt CSL (way back in 2006!). It supports all kinds of entry types and fields, beyond what BibTeX supports.</p></li>
</ol></section></section><section id="preparing-for-the-migration" class="level2 page-columns page-full"><h2 class="anchored" data-anchor-id="preparing-for-the-migration">Preparing for the migration</h2>
<p>Migrating my big <code>.references.bib</code> file to Zotero was a relatively straightforward process, but it required a few minor shenanigans to get everything working right.</p>
<section id="make-a-backup" class="level3"><h3 class="anchored" data-anchor-id="make-a-backup">Make a backup</h3>
<p>Preparing everything for migration meant I had to make a ton of edits to the original <code>references.bib</code> file, so I made a copy of it first and worked with the copy.</p>
</section><section id="install-extensions" class="level3"><h3 class="anchored" data-anchor-id="install-extensions">Install extensions</h3>
<p>To make Zotero work nicely with a pandoc-centric writing workflow, and to make file management and tag management easier, I installed these three extensions:</p>
<ul>
<li><a href="https://retorque.re/zotero-better-bibtex/">Better BibTeX</a></li>
<li><a href="http://zotfile.com/">ZotFile</a></li>
<li><a href="https://github.com/windingwind/zotero-tag">Zotero Tag</a></li>
</ul></section><section id="ratings-and-read-status" class="level3 page-columns page-full"><h3 class="anchored" data-anchor-id="ratings-and-read-status">Ratings and read status</h3>
<p>BibDesk allows you to add a couple extra metadata fields to entries for ratings and to mark them as read. I’ve used these fields for years and find them super useful for keeping track of how much I like articles and for remembering which ones I’ve actually finished.</p>
<p>Internally, BibDesk stores this data as entries in the raw BibTex:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bibtex code-with-copy"><code class="sourceCode bibtex"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="va">@article</span>{<span class="ot">the_citekey_for_this_entry</span>,</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">author</span> = {Whoever},</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">title</span> = {Whatever},</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">...</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">rating</span> = {4},</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">read</span> = {1}}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>These fields are preserved and transferred to Zotero when you import the file, but they show up in the “Extra” field and aren’t easily filterable or sortable there:</p>
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full"><p><img src="img/extra-fields.png" class="border rounded img-fluid figure-img" style="width:60.0%" alt="Extra fields from a BibTeX file"></p>
<figcaption class="margin-caption">Extra fields from a BibTeX file</figcaption></figure>
</div>
<p>I decided to treat these as Zotero tags, which BibDesk calls keywords. I considered making some sort of programmatic solution and writing a script to convert all the <code>rating</code> and <code>read</code> fields to <code>keywords</code>, but that seemed like too much work—many entries have existing keywords and parsing the file and concatenating ratings and read status to the list of keywords would be hard.</p>
<p>So instead I sorted all my entries in BibDesk by rating, selected all the 5 star ones and added a <code>zzzzz</code> tag, selected all the 4 star ones and added a <code>zzzz</code> tag, and so on (so that 1 star entries got a <code>z</code>) tag. I then sorted the entries by read status and assigned <code>xxx</code> to all the ones I’ve read. These tag names were just temporary—in Zotero I changed these to emojis (⭐️⭐️⭐️ and ✅), but because I was worried about transferring complex Unicode characters like emojis across programs, I decided to simplify things by temporarily just using ASCII characters.</p>
</section><section id="files" class="level3 page-columns page-full"><h3 class="anchored" data-anchor-id="files">Files</h3>
<section id="a-note-on-bibdesks-stored-filename" class="level4"><h4 class="anchored" data-anchor-id="a-note-on-bibdesks-stored-filename">A note on BibDesk’s stored filename</h4>
<p>BibDesk can autofile attached PDFs and manage their location. To keep track of where the files are, it stores their path as a base64-encoded path in a <code>bdsk-file-N</code> field in the <code>.bib</code> file, like this:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bibtex code-with-copy"><code class="sourceCode bibtex"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="va">@article</span>{<span class="ot">HeissKelley:2017</span>,</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">author</span> = {Andrew Heiss and Judith G. Kelley},</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">doi</span> = {10.1086/691218},</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">journal</span> = {Journal of Politics},</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">month</span> = {4},</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">number</span> = {2},</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">pages</span> = {732--41},</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">title</span> = {Between a Rock and a Hard Place: International {NGOs} and the Dual Pressures of Donors and Host Governments},</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">volume</span> = {79},</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">year</span> = {2017},</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">bdsk-file-1</span> = {YnBsaXN0MDDSAQIDBFxyZWxhdGl2ZVBhdGhZYWxpYXNEYXRhXxBcUGFwZXJzL0hlaXNzS2VsbGV5MjAxNyAtIEJldHdlZW4gYSBSb2NrIGFuZCBhIEhhcmQgUGxhY2UgSW50ZXJuYXRpb25hbCBOR09zIGFuZCB0aGUgRHVhbC5wZGZPEQJ8AAAAAAJ8AAIAAAxNYWNpbnRvc2ggSEQAAAAAAAAAAAAAAAAAAADfgQ51QkQAAf////8fSGVpc3NLZWxsZXkyMDE3IC0gI0ZGRkZGRkZGLnBkZgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////9T5sk0AAAAAAAAAAAABAAMAAAogY3UAAAAAAAAAAAAAAAAABlBhcGVycwACAHwvOlVzZXJzOmFuZHJldzpEcm9wYm94OlJlYWRpbmdzOlBhcGVyczpIZWlzc0tlbGxleTIwMTcgLSBCZXR3ZWVuIGEgUm9jayBhbmQgYSBIYXJkIFBsYWNlIEludGVybmF0aW9uYWwgTkdPcyBhbmQgdGhlIER1YWwucGRmAA4ArABVAEgAZQBpAHMAcwBLAGUAbABsAGUAeQAyADAAMQA3ACAALQAgAEIAZQB0AHcAZQBlAG4AIABhACAAUgBvAGMAawAgAGEAbgBkACAAYQAgAEgAYQByAGQAIABQAGwAYQBjAGUAIABJAG4AdABlAHIAbgBhAHQAaQBvAG4AYQBsACAATgBHAE8AcwAgAGEAbgBkACAAdABoAGUAIABEAHUAYQBsAC4AcABkAGYADwAaAAwATQBhAGMAaQBuAHQAbwBzAGgAIABIAEQAEgB6VXNlcnMvYW5kcmV3L0Ryb3Bib3gvUmVhZGluZ3MvUGFwZXJzL0hlaXNzS2VsbGV5MjAxNyAtIEJldHdlZW4gYSBSb2NrIGFuZCBhIEhhcmQgUGxhY2UgSW50ZXJuYXRpb25hbCBOR09zIGFuZCB0aGUgRHVhbC5wZGYAEwABLwAAFQACAA3//wAAAAgADQAaACQAgwAAAAAAAAIBAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAMD}}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Zotero doesn’t parse that gnarly field—it needs a field named <code>file</code>—and it doesn’t decode that messy string into a plain text file path, so the attached PDF won’t get imported correctly.</p>
<p><em>However</em>, <a href="https://github.com/retorquere/zotero-better-bibtex/issues/2374">thanks to Emiliano Heyns</a>, the Better BibTeX add-on will automatically convert these base64-encoded paths to plain text fields that Zotero can work with just fine. All PDFs will import automatically!</p>
</section><section id="customizing-zoteros-renaming-rules" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="customizing-zoteros-renaming-rules">Customizing Zotero’s renaming rules</h4>
<p>I wanted all the PDFs that Zotero would manage to have nice predictable filenames. In BibDesk, I used this pattern:</p>
<pre><code>citekey - First few words of title.pdf</code></pre>
<p>That’s been fine, but it uses spaces in the file name and doesn’t remove any punctuation or special characters, so it was a little trickier to work with in the terminal or with scripts or for easy consistent searching (especially when searching in the iPad Dropbox app when looking for a PDF to read). But because I set up that pattern in 2008, <a href="https://en.wikipedia.org/wiki/Path_dependence">path dependency</a> kind of locked me in and I’ve been unwilling to change it since.</p>
<p>Since I’m starting with a whole new reference manager, I figured it was time to adopt a better PDF naming system. In the ZotFile preferences, I set this pattern:</p>
<pre><code>{%a-}{%y-}{%t}</code></pre>
<p>…which translates to</p>
<pre><code>up_to_three_last_names-year-first_few_characters_of_title.pdf</code></pre>
<p><em>(see <a href="http://zotfile.com/index.html#renaming-rules">this for a list of all the possible wildcards</a>)</em></p>
<p>…with <code>-</code> separating the three logical units (authors, year, title), and <code>_</code> separating all the words within each unit (which follows <a href="http://www2.stat.duke.edu/~rcs46/lectures_2015/01-markdown-git/slides/naming-slides/naming-slides.pdf">Jenny Bryan’s principles of file naming</a>). In practice, the pattern looks like this:</p>
<pre><code>heiss_kelley-2017-between_a_rock_and_a_hard_place.pdf</code></pre>
<p>I had to tweak a few other renaming settings too. Here’s the final set of preferences:</p>
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full"><p><img src="img/zotfile-preferences.png" class="img-fluid figure-img" style="width:80.0%" alt="ZotFile preferences"></p>
<figcaption class="margin-caption">ZotFile preferences</figcaption></figure>
</div>
<p>I wanted to switch the roles of <code>-</code> and <code>_</code> and do</p>
<pre><code>heiss-kelley_2017_between-a-rock-and-a-hard-place.pdf</code></pre>
<p>…but Zotero and/or ZotFile seems to hardwire <code>_</code> as the space replacement in its titles. Oh well.</p>
</section></section><section id="citekeys" class="level3 page-columns page-full"><h3 class="anchored" data-anchor-id="citekeys">Citekeys</h3>
<p>In BibDesk, I’ve had a citation key pattern that I’ve used for years: <code>Lastname:Year</code>, with up to three last names for coauthored things, and an incremental lowercase letter in the case of duplicates:</p>
<pre><code>HeissKelley:2017
HeissKelley:2017a
Imbens:2021
LundbergJohnsonStewart:2021</code></pre>
<p>Zotero and Better BibTeX preserve citekeys when you import a <code>.bib</code> file, but I wanted to make sure I keep using this system for new items I add going forward, so I changed the Better BibTeX preferences to use the same pattern:</p>
<pre><code>auth(0,1) + auth(0,2) + auth(0,3) + ":" + year</code></pre>
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full"><p><img src="img/bbt-settings.png" class="img-fluid figure-img" style="width:90.0%" alt="Better BibTeX settings"></p>
<figcaption class="margin-caption">Better BibTeX settings</figcaption></figure>
</div>
</section></section><section id="post-import-tweaks" class="level2 page-columns page-full"><h2 class="anchored" data-anchor-id="post-import-tweaks">Post-import tweaks</h2>
<p>With all that initial prep work done, I imported the <code>.bib</code> file into my Zotero library (File &gt; Import…). I made sure “Place imported collections and items to new collection” was checked and that files were copied to the Zotero storage folder:</p>
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full"><p><img src="img/zotero-import.png" class="img-fluid figure-img" style="width:90.0%" alt="Zotero's import dialog"></p>
<figcaption class="margin-caption">Zotero’s import dialog</figcaption></figure>
</div>
<section id="ratings-and-read-status-1" class="level3 page-columns page-full"><h3 class="anchored" data-anchor-id="ratings-and-read-status-1">Ratings and read status</h3>
<p>The Tags panel in Zotero then showed all the project/class-specific keywords from BibDesk, in addition to the ratings and read status tags I added previously:</p>
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full"><p><img src="img/tags-pre-renaming.png" class="img-fluid figure-img" style="width:50.0%" alt="Tags before renaming"></p>
<figcaption class="margin-caption">Tags before renaming</figcaption></figure>
</div>
<p>I renamed each of the <code>zzz*</code> rating tags to use emoji stars and renamed the <code>xxx</code> read tag to use ✅.</p>
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full"><p><img src="img/tags-post-renaming.png" class="img-fluid figure-img" style="width:50.0%" alt="Tags after renaming"></p>
<figcaption class="margin-caption">Tags after renaming</figcaption></figure>
</div>
<p>Zotero has the ability to assign tags specific colors and pin them in a specific order, which also makes the tags display in the main Zotero library list. Following <a href="https://github.com/windingwind/zotero-tag/blob/master/docs/item-star.md">advice from the Zotero Tag extension</a>, I pinned the read status ✅ tag as the first tag, the 5-star rating as the second tag, the 4-star rating as the third tag, and so on.</p>
<p>Now the read status and ratings tags are easily accessible and appear directly in the main Zotero library list!</p>
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full"><p><img src="img/library-with-read-ratings.png" class="img-fluid figure-img" style="width:100.0%" alt="Zotero library with read status and ratings tags"></p>
<figcaption class="margin-caption">Zotero library with read status and ratings tags</figcaption></figure>
</div>
</section><section id="tags-to-collections" class="level3 page-columns page-full"><h3 class="anchored" data-anchor-id="tags-to-collections">Tags to collections</h3>
<p>Zotero has two different methods for categorizing entries—<a href="https://www.zotero.org/support/collections_and_tags">tags and collections</a>—while BibDesk / BibTeX only uses keywords, which Zotero treats as tags.</p>
<p>I decided that in Zotero I’d use both tags and collections. Tags are reserved for things like general topics, ratings, to-read designations, etc., while collections represent specific projects or classes.</p>
<p>I already assigned project- and class-specific keywords in BibDesk, so I just needed to move those keyworded entries into Zotero collections. There’s no way (that I could find) to include collection information in the <code>.bib</code> file and have it import into Zotero, so I ended up manually creating collections for each of the imported keywords. I filtered the library to only show items from one of the future collections, selected all the items, right-clicked, and chose “Add to collection” &gt; “New collection…” and created a new collection. I then deleted the tag.</p>
<p>For instance, here’s what Zotero looked like after I assigned these 6 items, tagged as “Polsci 733”, to the new “Polsci 733” collection (shown in the folder in the sidebar). I just had to delete the tag after:</p>
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full"><p><img src="img/example-733.png" class="img-fluid figure-img" style="width:100.0%" alt="Example of the Polsci 733 tag after being converted to a collection"></p>
<figcaption class="margin-caption">Example of the Polsci 733 tag after being converted to a collection</figcaption></figure>
</div>
</section><section id="incollection-inbook-and-crossref" class="level3 page-columns page-full"><h3 class="anchored" data-anchor-id="incollection-inbook-and-crossref">
<code>incollection</code> / <code>inbook</code> and <code>crossref</code>
</h3>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>This <a href="https://github.com/andrewheiss/ath-quarto/blob/74041ee1b8eab2f1054a4422651f0d49e12137bc/blog/2023/01/08/bibdesk-to-zotero-pandoc/index.qmd#L253">used to cause problems</a> with child references not importing fields from their parents, but <a href="https://github.com/retorquere/zotero-better-bibtex/issues/2373">thanks to Emiliano Heynes</a>, this all works flawlessly if you have verison 6.7.47+ of Better BibTeX installed.</p>
</div>
</div>
<p><a href="https://bibdesk.sourceforge.io/manual/BibDeskHelp_2.html#SEC18">BibDesk natively supports the <code>crossref</code> field</a>, which biber and biblatex use when working with LaTeX. This field lets you set up child/parent relationships with items, where children inherit fields from their parents. For instance, consider these two items—an edited book with lots of chapters from different authors and a chapter from that book:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode bibtex code-with-copy"><code class="sourceCode bibtex"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="va">@inbook</span>{<span class="ot">El</span>-<span class="ot">HusseiniToeplerSalamon:2004</span>,</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">author</span> = {Hashem El-Husseini and Stefan Toepler and Lester M. Salamon},</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">chapter</span> = {12},</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">crossref</span> = {SalamonSokolowski:2004},</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">pages</span> = {227--32},</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">title</span> = {Lebanon}}</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="va">@book</span>{<span class="ot">SalamonSokolowski:2004</span>,</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">address</span> = {Bloomfield, CT},</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">editor</span> = {Lester M. Salamon and S. Wojciech Sokolowski},</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">publisher</span> = {Kumarian Press},</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">title</span> = {Global Civil Society: Dimensions of the Nonprofit Sector},</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">volume</span> = {2},</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">year</span> = {2004}}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In BibDesk, the chapter displays like this:</p>
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full"><p><img src="img/bibdesk-crossref.png" class="img-fluid figure-img" style="width:100.0%" alt="BibDesk editor window for a book chapter that inherits its parent book's attributes"></p>
<figcaption class="margin-caption">BibDesk editor window for a book chapter that inherits its parent book’s attributes</figcaption></figure>
</div>
<p>Fields like book title, publisher, year, etc., are all greyed out because they’re inherited from the parent book, with the citekey <code>SalamonSokolowski:2004</code></p>
<p>If you install version 6.7.47+ of the <a href="https://retorque.re/zotero-better-bibtex/">Better BibTeX</a> add-on, the chapter will inherit all the information from its parent book—the book title, date, publisher, etc., will all be imported correctly:</p>
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full"><p><img src="img/correct-crossref-fields.png" class="img-fluid figure-img" style="width:50.0%" alt="Cross referenced parent attributes in Zotero are imported correctly"></p>
<figcaption class="margin-caption">Cross referenced parent attributes in Zotero are imported correctly</figcaption></figure>
</div>
</section><section id="all-done" class="level3 page-columns page-full"><h3 class="anchored" data-anchor-id="all-done">All done!</h3>
<p>And with that, I have a complete version of my 15-year-old <code>references.bib</code> file inside Zotero!</p>
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full"><p><img src="img/zotero-final.png" class="img-fluid figure-img" style="width:100.0%" alt="Complete Zotero library"></p>
<figcaption class="margin-caption">Complete Zotero library</figcaption></figure>
</div>
</section></section><section id="example-workflow-with-quarto-r-markdown-pandoc" class="level2 page-columns page-full"><h2 class="anchored" data-anchor-id="example-workflow-with-quarto-r-markdown-pandoc">Example workflow with Quarto / R Markdown / pandoc</h2>
<p>Part of the reason I’ve been hesitant to switch away from BibDesk for so long is because I couldn’t figure out a way to connect a Markdown document to my Zotero database. With documents that get parsed through pandoc (like R Markdown or Quarto), you add a line in the YAML front matter to specify what file contains your references:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> Whatever</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">author</span><span class="kw">:</span><span class="at"> Whoever</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="fu">bibliography</span><span class="kw">:</span><span class="at"> references.bib</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Since Zotero keeps everything in one big database, I didn’t see a way to add something like <code>bibliography: My Zotero Database</code> to the YAML front matter—pandoc requires that you point to a plain text file like <code>.bib</code> or <code>.json</code> or <code>.yml</code>, not a Zotero database.</p>
<p>However, the <a href="https://retorque.re/zotero-better-bibtex/">magical Better BibTeX add-on</a> clarified everything for me and makes it super easy to point pandoc at a single file that contains a collection of reference items.</p>
<section id="export-collection-to-.bib-file" class="level3 page-columns page-full"><h3 class="anchored" data-anchor-id="export-collection-to-.bib-file">Export collection to <code>.bib</code> file</h3>
<p>First, create a collection of items that you want to cite in your writing project. Since collections are like playlists and items can belong to multiple collections, there’s no need to manage duplicate entries or anything (like I was running into with <a href="#problem-2-collaboration-across-many-projects-with-many-coauthors">Problem 2 above</a>).</p>
<p>Right click on the collection name and choose “Export collection…”.</p>
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full"><p><img src="img/export-collection.png" class="img-fluid figure-img" style="width:70.0%" alt="Exporting a Zotero collection"></p>
<figcaption class="margin-caption">Exporting a Zotero collection</figcaption></figure>
</div>
<p>Change the format to “Better BibLaTeX”, check “Keep updated”, and choose a place to save the resulting <code>.bib</code> file.</p>
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full"><p><img src="img/export-format.png" class="img-fluid figure-img" style="width:60.0%" alt="Changing the export format"></p>
<figcaption class="margin-caption">Changing the export format</figcaption></figure>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>You could also export it as “Better CSL JSON” or “Better CSL YAML”, which would create a <code>.json</code> or <code>.yml</code> file that you could then point to in your YAML front matter, which would keep everything in CSL format instead of converting things to <code>.bib</code> and back again (see <a href="#problem-3-bibtex-was-designed-for-latexbut-just-latex">Problem 3 above</a>). However, in my academic writing projects I still like to let LaTeX, BibLaTeX, and biber handle the citation generation instead of pandoc <em>for PDFs</em>, so I still rely on <code>.bib</code> files. But if you’re not converting to PDF, or if you’re letting the CSL style template handle the citations instead of BibLaTeX, <a href="https://retorque.re/zotero-better-bibtex/exporting/pandoc/">you should probably keep everything as JSON or YAML</a> instead of <code>.bib</code>.</p>
</div>
</div>
<p>The “Keep updated” option is the magical part of this whole thing. If you add an item or edit an existing item in the collection in Zotero, <strong>Better BibTeX will automatically re-export the collection</strong> to the <code>.bib</code> file. You can have one central repository of citations and lots of dynamically updated plain text <code>.bib</code> files that you don’t have to edit or keep track of. Truly magical.</p>
</section><section id="point-the-.qmd-.rmd-.md-to-the-exported-file" class="level3"><h3 class="anchored" data-anchor-id="point-the-.qmd-.rmd-.md-to-the-exported-file">Point the <code>.qmd</code> / <code>.Rmd</code> / <code>.md</code> to the exported file</h3>
<p>You’ll now have a <code>.bib</code> file that contains all the references that you can cite. Put that filename in your front matter (use <code>.json</code> or <code>.yml</code> if you export the file as JSON or YAML instead):</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> Whatever</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fu">author</span><span class="kw">:</span><span class="at"> Whoever</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="fu">bibliography</span><span class="kw">:</span><span class="at"> name_of_file_you_exported_from_zotero.bib</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section><section id="cite-things" class="level3 page-columns page-full"><h3 class="anchored" data-anchor-id="cite-things">Cite things</h3>
<p>Cite things <a href="https://quarto.org/docs/authoring/footnotes-and-citations.html#sec-citations">like normal</a>.</p>
<p>Because the front matter is pointed at a plain text <code>.bib</code> file that contains all the bibliographic references, it’ll generate the citations correctly. And because Better BibTeX is configured to automatically update the exported plain text file, any changes you make in Zotero will automatically be reflected. Again, this is magic.</p>
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full"><p><img src="img/vscode-output.png" class="img-fluid figure-img" style="width:100.0%" alt="Visual Studio Code with a Quarto Markdown file configured to look at an auto-updating .bib file exported from Zotero"></p>
<figcaption class="margin-caption">Visual Studio Code with a Quarto Markdown file configured to look at an auto-updating .bib file exported from Zotero</figcaption></figure>
</div>
</section><section id="rstudio-based-alternative" class="level3 page-columns page-full"><h3 class="anchored" data-anchor-id="rstudio-based-alternative">RStudio-based alternative</h3>
<p>Alternatively, if you write in RStudio, you can connect RStudio to your Zotero database and have it do a similar auto-export thing. You can also tell it to use Better BibTeX to keep things automatically synced:</p>
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full"><p><img src="img/rstudio-zotero.png" class="img-fluid figure-img" style="width:80.0%" alt="RStudio preferences pane for enabling Zotero"></p>
<figcaption class="margin-caption">RStudio preferences pane for enabling Zotero</figcaption></figure>
</div>
<p><em>(<a href="https://rstudio.github.io/visual-markdown-editing/citations.html">See here for more details about Zotero citations in RStudio</a>)</em></p>
<p>One extra nice thing about using RStudio is its <a href="https://rstudio.github.io/visual-markdown-editing/citations.html#inserting-citations">fancy Insert Citation dialog</a>, which makes adding citations in Markdown just like adding citations in Word or Google Docs. It only works in the Visual Markdown Editor, though, which I don’t normally use, so I just use Better BibTeX alone rather than RStudio’s Zotero connection when I write in RStudio.</p>


<!-- -->

</section></section><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{heiss2023,
  author = {Heiss, Andrew},
  title = {How to Migrate from {BibDesk} to {Zotero} for Pandoc-Based
    Writing},
  date = {2023-01-08},
  url = {https://www.andrewheiss.com/blog/2023/01/08/bibdesk-to-zotero-pandoc/},
  doi = {10.59350/cwrq4-m7h10},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-heiss2023" class="csl-entry quarto-appendix-citeas" role="listitem">
Heiss, Andrew. 2023. <span>“How to Migrate from BibDesk to Zotero for
Pandoc-Based Writing.”</span> January 8, 2023. <a href="https://doi.org/10.59350/cwrq4-m7h10">https://doi.org/10.59350/cwrq4-m7h10</a>.
</div></div></section></div></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/www\.andrewheiss\.com");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><script src="https://giscus.app/client.js" data-repo="andrewheiss/ath-quarto" data-repo-id="R_kgDOIg6EJQ" data-category="Blog comments" data-category-id="DIC_kwDOIg6EJc4CSz92" data-mapping="pathname" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script><input type="hidden" id="giscus-base-theme" value="light"><input type="hidden" id="giscus-alt-theme" value="dark"><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb13" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "How to migrate from BibDesk to Zotero for pandoc-based writing"</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> 2023-01-08</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="an">description:</span><span class="co"> "Tips, tricks, and rationale for converting from a single big BibTeX file to a Zotero database"</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="an">image:</span><span class="co"> img/zotero-final.png</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="an">twitter-card:</span><span class="co"> </span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="co">    image: "img/zotero-final.png"</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="an">open-graph:</span><span class="co"> </span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="co">    image: "img/zotero-final.png"</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="an">categories:</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="co">  - writing</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="co">  - markdown</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="co">  - citations</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a><span class="co">  - pandoc</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a><span class="co">  - zotero</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a><span class="an">doi:</span><span class="co"> 10.59350/cwrq4-m7h10</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a><span class="an">citation:</span><span class="co"> true</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a><span class="in">```{r setup, include=FALSE}</span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::opts_chunk$set(fig.width = 6, fig.height = 3.8,</span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a><span class="in">                      fig.align = "center", fig.retina = 3,</span></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a><span class="in">                      out.width = "85%", collapse = TRUE)</span></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a><span class="fu">## My longstanding workflow for writing, citing, and PDF management</span></span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a>When I started my first master's degree program in 2008, I decided to stop using Word for all my academic writing and instead use plain text Markdown for everything. <span class="co">[</span><span class="ot">Markdown</span><span class="co">](https://en.wikipedia.org/wiki/Markdown)</span> itself had been a thing for 4 years, and <span class="co">[</span><span class="ot">MultiMarkdown</span><span class="co">](https://fletcherpenney.net/multimarkdown/)</span>—a <span class="co">[</span><span class="ot">pandoc</span><span class="co">](https://en.wikipedia.org/wiki/Pandoc)</span>-like extension of Markdown that could handle BibTeX bibliographies—was brand new. I did all my writing for my courses and my thesis in Markdown and converted it all to PDF through LaTeX using MultiMarkdown. I didn't know about pandoc yet, so I only ever converted to PDF, not HTML or Word.</span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>I stored all my bibliographic references in a tiny little <span class="in">`references.bib`</span> BibTeX file that I managed with <span class="co">[</span><span class="ot">BibDesk</span><span class="co">](https://bibdesk.sourceforge.io/)</span>. BibDesk is a wonderful and powerful program with an active developer community and it does all sorts of neat stuff like auto-filing PDFs, importing references from DOIs, searching for references on the internet from inside the program, and just providing a nice overall front end for dealing with BibTeX files.</span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a>I kept using my MultiMarkdown + LaTeX output system throughout my second master's degree, and my <span class="in">`references.bib`</span> file and PDF database slowly grew. R Markdown hadn't been invented yet and I still hadn't discovered pandoc, so living in a mostly LaTeX-based world was fine.</span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a>When I started my PhD in 2012, something revolutionary happened: <span class="co">[</span><span class="ot">the {knitr} package</span><span class="co">](https://yihui.org/knitr/)</span> was invented. The new <span class="co">[</span><span class="ot">R Markdown</span><span class="co">](https://rmarkdown.rstudio.com/)</span> format let you to mix R code with Markdown text and create multiple outputs (HTML, LaTeX, and docx) through pandoc. I abandoned MultiMarkdown and fully converted to pandoc (thanks also in part to Kieran Healy's <span class="co">[</span><span class="ot">*Plain Person's Gide to Plain Text Social Science*</span><span class="co">](https://plain-text.co/)</span>). Since 2012, I've written exclusively in pandoc-flavored Markdown and always make sure that I can convert everything to PDF, HTML, and Word (see the "Manuscript" entry <span class="co">[</span><span class="ot">in the navigation bar here</span><span class="co">](https://stats.andrewheiss.com/cautioning-canary/)</span>, for instance, where you can download the preprint version of that paper in a ton of different formats). I recently converted <span class="co">[</span><span class="ot">a bunch of my output templates</span><span class="co">](https://github.com/andrewheiss/hikmah-academic-quarto)</span> to <span class="co">[</span><span class="ot">Quarto pandoc</span><span class="co">](https://quarto.org/)</span> too.</span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true" tabindex="-1"></a>During all this time, I didn't really keep up with other reference managers. I used super early <span class="co">[</span><span class="ot">Zotero</span><span class="co">](https://www.zotero.org/)</span> as an undergrad back in 2006–2008, but it didn't fit well with my Markdown-based workflow, so I kind of ignored it. I picked it up again briefly at the beginning of my PhD, but I couldn't get it to play nicely with R Markdown and pandoc, so I kept using trusty old BibDesk. My <span class="in">`references.bib`</span> file got bigger and bigger as I took more and more doctoral classes and did more research, but BibDesk handled the growing library just fine. As of today, I've got 1,400 items in there with nearly 1,000 PDFs, and everything still works great—mostly.</span>
<span id="cb13-38"><a href="#cb13-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-39"><a href="#cb13-39" aria-hidden="true" tabindex="-1"></a><span class="fu">## Why switch away from BibTeX and BibDesk?</span></span>
<span id="cb13-40"><a href="#cb13-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-41"><a href="#cb13-41" aria-hidden="true" tabindex="-1"></a>BibDesk got me through my dissertation and all my research projects up until now, so why consider switching away to some other system? Over the past few years, as I've done more reading on my iPad and worked on more coauthored projects, I've run into a few pain points in my citation workflow.</span>
<span id="cb13-42"><a href="#cb13-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-43"><a href="#cb13-43" aria-hidden="true" tabindex="-1"></a><span class="fu">### Problem 1: Cross-device reading</span></span>
<span id="cb13-44"><a href="#cb13-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-45"><a href="#cb13-45" aria-hidden="true" tabindex="-1"></a>I enjoy reading PDFs on my iPad (particularly in the <span class="co">[</span><span class="ot">iAnnotate app</span><span class="co">](https://www.folia.com/iannotate)</span>), but getting PDFs from BibDesk onto the iPad has always required a bizarre dance:</span>
<span id="cb13-46"><a href="#cb13-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-47"><a href="#cb13-47" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Store <span class="in">`references.bib`</span> and the BibDesk-managed folder of PDFs in Dropbox</span>
<span id="cb13-48"><a href="#cb13-48" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Use the <span class="co">[</span><span class="ot">References</span><span class="co">](https://sites.google.com/site/appsformaths/references)</span> iPad app to open the BibTeX file from Dropbox on the iPad</span>
<span id="cb13-49"><a href="#cb13-49" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>Use iAnnotate to navigate Dropbox and find the PDF I want to read</span>
<span id="cb13-50"><a href="#cb13-50" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>Read and annotate the PDF in iAnnotate</span>
<span id="cb13-51"><a href="#cb13-51" aria-hidden="true" tabindex="-1"></a><span class="ss">5. </span>Send the finished PDF from iAnnotate back to Dropbox and go back to References to ensure that the annotated PDF updates</span>
<span id="cb13-52"><a href="#cb13-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-53"><a href="#cb13-53" aria-hidden="true" tabindex="-1"></a>I'd often get sick of this convoluted process and just find the PDF on my computer and AirDrop it to my iPad directly, completely circumventing Dropbox. I'd then AirDrop it back to my computer and attach the marked up PDF to the reference in BibDesk. It's inconvenient, but less inconvenient than bouncing around a bunch of different apps and hoping everything works.</span>
<span id="cb13-54"><a href="#cb13-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-55"><a href="#cb13-55" aria-hidden="true" tabindex="-1"></a><span class="fu">### Problem 2: Collaboration across many projects with many coauthors</span></span>
<span id="cb13-56"><a href="#cb13-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-57"><a href="#cb13-57" aria-hidden="true" tabindex="-1"></a>Collaboration with a single huge <span class="in">`references.bib`</span> file is impossible. I could share my Dropbox folder with coauthors, but then they'd see all my entries and have access to all my annotated PDFs, which seems like overkill. As I started working with coauthors, I decided to make smaller project-specific <span class="in">`.bib`</span> files that would be shareable and editable. </span>
<span id="cb13-58"><a href="#cb13-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-59"><a href="#cb13-59" aria-hidden="true" tabindex="-1"></a>This is great for project modularity—see how <span class="co">[</span><span class="ot">this `bibliography.bib` file</span><span class="co">](https://github.com/andrewheiss/cautioning-canary/blob/master/manuscript/bibliography.bib)</span> only contains things we cited? But it caused *major* synchronization problems. If me or a coauthor makes any edits to the project-specific files (adding a DOI to an existing entry, adding a new entry, etc.), those changes don't show up in my big master <span class="in">`references.bib`</span> file. I have to remember to copy those changes to the main file, and I never remember. With some recent projects, I've actually been copying some entries from previous projects' <span class="in">`.bib`</span> files rather than from the big <span class="in">`references.bib`</span> file. Everything's diverging and it's a pain.</span>
<span id="cb13-60"><a href="#cb13-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-61"><a href="#cb13-61" aria-hidden="true" tabindex="-1"></a><span class="fu">### Problem 3: BibTeX was designed for LaTeX—but just LaTeX</span></span>
<span id="cb13-62"><a href="#cb13-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-63"><a href="#cb13-63" aria-hidden="true" tabindex="-1"></a>BibTeX works great with LaTeX. That's why it was invented in the first place! The fact that things like pandoc work with it is partially a historical accident—<span class="in">`.bib`</span> files were a convenient and widely used plain text bibliography format, so pandoc and MultiMarkdown used BibTeX for citations. </span>
<span id="cb13-64"><a href="#cb13-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-65"><a href="#cb13-65" aria-hidden="true" tabindex="-1"></a>But citations are often more complicated than BibTeX can handle. Consider the LaTeX package <span class="co">[</span><span class="ot">biblatex-chicago</span><span class="co">](https://ctan.org/pkg/biblatex-chicago?lang=en)</span>—in order to be fully compliant with all the intricacies of the Chicago Manual of Style, it has to expand the BibTeX (technically BibLaTeX) format to include fields like <span class="in">`entrysubtype`</span> for distinguishing between magazine/newspaper articles and journal articles, among dozens of other customizations and tweaks. BibTeX has a limited set of entry types, and anything that's not one of those types gets shoehorned into the <span class="in">`misc`</span> type. </span>
<span id="cb13-66"><a href="#cb13-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-67"><a href="#cb13-67" aria-hidden="true" tabindex="-1"></a>Internally, programs like pandoc that can read BibTeX files convert them into a standard <span class="co">[</span><span class="ot">Citation Style Language (CSL)</span><span class="co">](https://en.wikipedia.org/wiki/Citation_Style_Language)</span> format, which it then uses to format references as Chicago, APA, MLA, or whatever. It would be great to store all my citations in a CSL-compliant format in the first place rather than as a LaTeX-only format that has to be constantly converted on-the-fly when converting to any non-LaTeX output. </span>
<span id="cb13-68"><a href="#cb13-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-69"><a href="#cb13-69" aria-hidden="true" tabindex="-1"></a><span class="fu">### The solution: Zotero</span></span>
<span id="cb13-70"><a href="#cb13-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-71"><a href="#cb13-71" aria-hidden="true" tabindex="-1"></a>Zotero conveniently fixes all these issues:</span>
<span id="cb13-72"><a href="#cb13-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-73"><a href="#cb13-73" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>It has <span class="co">[</span><span class="ot">a synchronization service</span><span class="co">](https://www.zotero.org/support/sync)</span> that works across platforms (including iOS). <span class="co">[</span><span class="ot">It can work with Dropbox too</span><span class="co">](https://ikashnitsky.github.io/2019/zotero/)</span> if you don't want to be bound by their file size limit or pay for extra storage, though I ended up paying for storage to (1) support open source software and (2) not have to deal with multiple programs. I've been doing the BibDesk → iAnnotate → Dropbox → MacBook → AirDrop dance for too many years—I just want Zotero to handle all the syncing for me.</span>
<span id="cb13-74"><a href="#cb13-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-75"><a href="#cb13-75" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>It's **super easy** to collaborate with Zotero. You can create shared group libraries with different sets of coauthors and not worry about Dropbox synchronization issues or accidental deletion of <span class="in">`}`</span> characters in the <span class="in">`.bib`</span> file. For one of my reading-intensive class, <span class="co">[</span><span class="ot">I've even created a shared Zotero group library</span><span class="co">](https://compasp23.classes.andrewheiss.com/class/)</span> that all the students can join and cite from, which is neat.</span>
<span id="cb13-76"><a href="#cb13-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-77"><a href="#cb13-77" aria-hidden="true" tabindex="-1"></a>   It's also far easier to maintain a master list of references. You can create a <span class="co">[</span><span class="ot">Zotero collection</span><span class="co">](https://www.zotero.org/support/collections_and_tags)</span> for specific projects, and items can live in multiple collections. Editing an item in one collection updates that item in all other collections. Zotero treats collections like iTunes/Apple Music playlists—just like songs can belong to multiple playlists, bibliographic entries can belong to multiple collections.</span>
<span id="cb13-78"><a href="#cb13-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-79"><a href="#cb13-79" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>Zotero follows the CSL standard that pandoc uses. It was the first program to adopt CSL (way back in 2006!). It supports all kinds of entry types and fields, beyond what BibTeX supports.</span>
<span id="cb13-80"><a href="#cb13-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-81"><a href="#cb13-81" aria-hidden="true" tabindex="-1"></a><span class="fu">## Preparing for the migration</span></span>
<span id="cb13-82"><a href="#cb13-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-83"><a href="#cb13-83" aria-hidden="true" tabindex="-1"></a>Migrating my big <span class="in">`.references.bib`</span> file to Zotero was a relatively straightforward process, but it required a few minor shenanigans to get everything working right.</span>
<span id="cb13-84"><a href="#cb13-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-85"><a href="#cb13-85" aria-hidden="true" tabindex="-1"></a><span class="fu">### Make a backup</span></span>
<span id="cb13-86"><a href="#cb13-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-87"><a href="#cb13-87" aria-hidden="true" tabindex="-1"></a>Preparing everything for migration meant I had to make a ton of edits to the original <span class="in">`references.bib`</span> file, so I made a copy of it first and worked with the copy.</span>
<span id="cb13-88"><a href="#cb13-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-89"><a href="#cb13-89" aria-hidden="true" tabindex="-1"></a><span class="fu">### Install extensions</span></span>
<span id="cb13-90"><a href="#cb13-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-91"><a href="#cb13-91" aria-hidden="true" tabindex="-1"></a>To make Zotero work nicely with a pandoc-centric writing workflow, and to make file management and tag management easier, I installed these three extensions:</span>
<span id="cb13-92"><a href="#cb13-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-93"><a href="#cb13-93" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="co">[</span><span class="ot">Better BibTeX</span><span class="co">](https://retorque.re/zotero-better-bibtex/)</span></span>
<span id="cb13-94"><a href="#cb13-94" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="co">[</span><span class="ot">ZotFile</span><span class="co">](http://zotfile.com/)</span></span>
<span id="cb13-95"><a href="#cb13-95" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="co">[</span><span class="ot">Zotero Tag</span><span class="co">](https://github.com/windingwind/zotero-tag)</span></span>
<span id="cb13-96"><a href="#cb13-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-97"><a href="#cb13-97" aria-hidden="true" tabindex="-1"></a><span class="fu">### Ratings and read status</span></span>
<span id="cb13-98"><a href="#cb13-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-99"><a href="#cb13-99" aria-hidden="true" tabindex="-1"></a>BibDesk allows you to add a couple extra metadata fields to entries for ratings and to mark them as read. I've used these fields for years and find them super useful for keeping track of how much I like articles and for remembering which ones I've actually finished.</span>
<span id="cb13-100"><a href="#cb13-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-101"><a href="#cb13-101" aria-hidden="true" tabindex="-1"></a>Internally, BibDesk stores this data as entries in the raw BibTex:</span>
<span id="cb13-102"><a href="#cb13-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-103"><a href="#cb13-103" aria-hidden="true" tabindex="-1"></a><span class="in">```bibtex</span></span>
<span id="cb13-104"><a href="#cb13-104" aria-hidden="true" tabindex="-1"></a><span class="in">@article{the_citekey_for_this_entry,</span></span>
<span id="cb13-105"><a href="#cb13-105" aria-hidden="true" tabindex="-1"></a><span class="in">    author = {Whoever},</span></span>
<span id="cb13-106"><a href="#cb13-106" aria-hidden="true" tabindex="-1"></a><span class="in">    title = {Whatever},</span></span>
<span id="cb13-107"><a href="#cb13-107" aria-hidden="true" tabindex="-1"></a><span class="in">    ...</span></span>
<span id="cb13-108"><a href="#cb13-108" aria-hidden="true" tabindex="-1"></a><span class="in">    rating = {4},</span></span>
<span id="cb13-109"><a href="#cb13-109" aria-hidden="true" tabindex="-1"></a><span class="in">    read = {1}}</span></span>
<span id="cb13-110"><a href="#cb13-110" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb13-111"><a href="#cb13-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-112"><a href="#cb13-112" aria-hidden="true" tabindex="-1"></a>These fields are preserved and transferred to Zotero when you import the file, but they show up in the "Extra" field and aren't easily filterable or sortable there:</span>
<span id="cb13-113"><a href="#cb13-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-114"><a href="#cb13-114" aria-hidden="true" tabindex="-1"></a><span class="al">![Extra fields from a BibTeX file](img/extra-fields.png)</span>{.border .rounded width=60% fig-alt="Extra fields from a BibTeX file"}</span>
<span id="cb13-115"><a href="#cb13-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-116"><a href="#cb13-116" aria-hidden="true" tabindex="-1"></a>I decided to treat these as Zotero tags, which BibDesk calls keywords. I considered making some sort of programmatic solution and writing a script to convert all the <span class="in">`rating`</span> and <span class="in">`read`</span> fields to <span class="in">`keywords`</span>, but that seemed like too much work—many entries have existing keywords and parsing the file and concatenating ratings and read status to the list of keywords would be hard. </span>
<span id="cb13-117"><a href="#cb13-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-118"><a href="#cb13-118" aria-hidden="true" tabindex="-1"></a>So instead I sorted all my entries in BibDesk by rating, selected all the 5 star ones and added a <span class="in">`zzzzz`</span> tag, selected all the 4 star ones and added a <span class="in">`zzzz`</span> tag, and so on (so that 1 star entries got a <span class="in">`z`</span>) tag. I then sorted the entries by read status and assigned <span class="in">`xxx`</span> to all the ones I've read. These tag names were just temporary—in Zotero I changed these to emojis (⭐️⭐️⭐️  and ✅), but because I was worried about transferring complex Unicode characters like emojis across programs, I decided to simplify things by temporarily just using ASCII characters.</span>
<span id="cb13-119"><a href="#cb13-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-120"><a href="#cb13-120" aria-hidden="true" tabindex="-1"></a><span class="fu">### Files</span></span>
<span id="cb13-121"><a href="#cb13-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-122"><a href="#cb13-122" aria-hidden="true" tabindex="-1"></a><span class="fu">#### A note on BibDesk's stored filename</span></span>
<span id="cb13-123"><a href="#cb13-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-124"><a href="#cb13-124" aria-hidden="true" tabindex="-1"></a>BibDesk can autofile attached PDFs and manage their location. To keep track of where the files are, it stores their path as a base64-encoded path in a <span class="in">`bdsk-file-N`</span> field in the <span class="in">`.bib`</span> file, like this:</span>
<span id="cb13-125"><a href="#cb13-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-126"><a href="#cb13-126" aria-hidden="true" tabindex="-1"></a><span class="in">```bibtex</span></span>
<span id="cb13-127"><a href="#cb13-127" aria-hidden="true" tabindex="-1"></a><span class="in">@article{HeissKelley:2017,</span></span>
<span id="cb13-128"><a href="#cb13-128" aria-hidden="true" tabindex="-1"></a><span class="in">    author = {Andrew Heiss and Judith G. Kelley},</span></span>
<span id="cb13-129"><a href="#cb13-129" aria-hidden="true" tabindex="-1"></a><span class="in">    doi = {10.1086/691218},</span></span>
<span id="cb13-130"><a href="#cb13-130" aria-hidden="true" tabindex="-1"></a><span class="in">    journal = {Journal of Politics},</span></span>
<span id="cb13-131"><a href="#cb13-131" aria-hidden="true" tabindex="-1"></a><span class="in">    month = {4},</span></span>
<span id="cb13-132"><a href="#cb13-132" aria-hidden="true" tabindex="-1"></a><span class="in">    number = {2},</span></span>
<span id="cb13-133"><a href="#cb13-133" aria-hidden="true" tabindex="-1"></a><span class="in">    pages = {732--41},</span></span>
<span id="cb13-134"><a href="#cb13-134" aria-hidden="true" tabindex="-1"></a><span class="in">    title = {Between a Rock and a Hard Place: International {NGOs} and the Dual Pressures of Donors and Host Governments},</span></span>
<span id="cb13-135"><a href="#cb13-135" aria-hidden="true" tabindex="-1"></a><span class="in">    volume = {79},</span></span>
<span id="cb13-136"><a href="#cb13-136" aria-hidden="true" tabindex="-1"></a><span class="in">    year = {2017},</span></span>
<span id="cb13-137"><a href="#cb13-137" aria-hidden="true" tabindex="-1"></a><span class="in">    bdsk-file-1 = {YnBsaXN0MDDSAQIDBFxyZWxhdGl2ZVBhdGhZYWxpYXNEYXRhXxBcUGFwZXJzL0hlaXNzS2VsbGV5MjAxNyAtIEJldHdlZW4gYSBSb2NrIGFuZCBhIEhhcmQgUGxhY2UgSW50ZXJuYXRpb25hbCBOR09zIGFuZCB0aGUgRHVhbC5wZGZPEQJ8AAAAAAJ8AAIAAAxNYWNpbnRvc2ggSEQAAAAAAAAAAAAAAAAAAADfgQ51QkQAAf////8fSGVpc3NLZWxsZXkyMDE3IC0gI0ZGRkZGRkZGLnBkZgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////9T5sk0AAAAAAAAAAAABAAMAAAogY3UAAAAAAAAAAAAAAAAABlBhcGVycwACAHwvOlVzZXJzOmFuZHJldzpEcm9wYm94OlJlYWRpbmdzOlBhcGVyczpIZWlzc0tlbGxleTIwMTcgLSBCZXR3ZWVuIGEgUm9jayBhbmQgYSBIYXJkIFBsYWNlIEludGVybmF0aW9uYWwgTkdPcyBhbmQgdGhlIER1YWwucGRmAA4ArABVAEgAZQBpAHMAcwBLAGUAbABsAGUAeQAyADAAMQA3ACAALQAgAEIAZQB0AHcAZQBlAG4AIABhACAAUgBvAGMAawAgAGEAbgBkACAAYQAgAEgAYQByAGQAIABQAGwAYQBjAGUAIABJAG4AdABlAHIAbgBhAHQAaQBvAG4AYQBsACAATgBHAE8AcwAgAGEAbgBkACAAdABoAGUAIABEAHUAYQBsAC4AcABkAGYADwAaAAwATQBhAGMAaQBuAHQAbwBzAGgAIABIAEQAEgB6VXNlcnMvYW5kcmV3L0Ryb3Bib3gvUmVhZGluZ3MvUGFwZXJzL0hlaXNzS2VsbGV5MjAxNyAtIEJldHdlZW4gYSBSb2NrIGFuZCBhIEhhcmQgUGxhY2UgSW50ZXJuYXRpb25hbCBOR09zIGFuZCB0aGUgRHVhbC5wZGYAEwABLwAAFQACAA3//wAAAAgADQAaACQAgwAAAAAAAAIBAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAMD}}</span></span>
<span id="cb13-138"><a href="#cb13-138" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb13-139"><a href="#cb13-139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-140"><a href="#cb13-140" aria-hidden="true" tabindex="-1"></a>Zotero doesn't parse that gnarly field—it needs a field named <span class="in">`file`</span>—and it doesn't decode that messy string into a plain text file path, so the attached PDF won't get imported correctly.</span>
<span id="cb13-141"><a href="#cb13-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-142"><a href="#cb13-142" aria-hidden="true" tabindex="-1"></a>*However*, <span class="co">[</span><span class="ot">thanks to Emiliano Heyns</span><span class="co">](https://github.com/retorquere/zotero-better-bibtex/issues/2374)</span>, the Better BibTeX add-on will automatically convert these base64-encoded paths to plain text fields that Zotero can work with just fine. All PDFs will import automatically!</span>
<span id="cb13-143"><a href="#cb13-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-144"><a href="#cb13-144" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Customizing Zotero's renaming rules</span></span>
<span id="cb13-145"><a href="#cb13-145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-146"><a href="#cb13-146" aria-hidden="true" tabindex="-1"></a>I wanted all the PDFs that Zotero would manage to have nice predictable filenames. In BibDesk, I used this pattern:</span>
<span id="cb13-147"><a href="#cb13-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-148"><a href="#cb13-148" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb13-149"><a href="#cb13-149" aria-hidden="true" tabindex="-1"></a><span class="in">citekey - First few words of title.pdf</span></span>
<span id="cb13-150"><a href="#cb13-150" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb13-151"><a href="#cb13-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-152"><a href="#cb13-152" aria-hidden="true" tabindex="-1"></a>That's been fine, but it uses spaces in the file name and doesn't remove any punctuation or special characters, so it was a little trickier to work with in the terminal or with scripts or for easy consistent searching (especially when searching in the iPad Dropbox app when looking for a PDF to read). But because I set up that pattern in 2008, <span class="co">[</span><span class="ot">path dependency</span><span class="co">](https://en.wikipedia.org/wiki/Path_dependence)</span> kind of locked me in and I've been unwilling to change it since. </span>
<span id="cb13-153"><a href="#cb13-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-154"><a href="#cb13-154" aria-hidden="true" tabindex="-1"></a>Since I'm starting with a whole new reference manager, I figured it was time to adopt a better PDF naming system. In the ZotFile preferences, I set this pattern:</span>
<span id="cb13-155"><a href="#cb13-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-156"><a href="#cb13-156" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb13-157"><a href="#cb13-157" aria-hidden="true" tabindex="-1"></a><span class="in">{%a-}{%y-}{%t}</span></span>
<span id="cb13-158"><a href="#cb13-158" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb13-159"><a href="#cb13-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-160"><a href="#cb13-160" aria-hidden="true" tabindex="-1"></a>…which translates to </span>
<span id="cb13-161"><a href="#cb13-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-162"><a href="#cb13-162" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb13-163"><a href="#cb13-163" aria-hidden="true" tabindex="-1"></a><span class="in">up_to_three_last_names-year-first_few_characters_of_title.pdf</span></span>
<span id="cb13-164"><a href="#cb13-164" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb13-165"><a href="#cb13-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-166"><a href="#cb13-166" aria-hidden="true" tabindex="-1"></a>*(see [this for a list of all the possible wildcards](http://zotfile.com/index.html#renaming-rules))*</span>
<span id="cb13-167"><a href="#cb13-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-168"><a href="#cb13-168" aria-hidden="true" tabindex="-1"></a>…with <span class="in">`-`</span> separating the three logical units (authors, year, title), and <span class="in">`_`</span> separating all the words within each unit (which follows <span class="co">[</span><span class="ot">Jenny Bryan's principles of file naming</span><span class="co">](http://www2.stat.duke.edu/~rcs46/lectures_2015/01-markdown-git/slides/naming-slides/naming-slides.pdf)</span>). In practice, the pattern looks like this:</span>
<span id="cb13-169"><a href="#cb13-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-170"><a href="#cb13-170" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb13-171"><a href="#cb13-171" aria-hidden="true" tabindex="-1"></a><span class="in">heiss_kelley-2017-between_a_rock_and_a_hard_place.pdf</span></span>
<span id="cb13-172"><a href="#cb13-172" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb13-173"><a href="#cb13-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-174"><a href="#cb13-174" aria-hidden="true" tabindex="-1"></a>I had to tweak a few other renaming settings too. Here's the final set of preferences:</span>
<span id="cb13-175"><a href="#cb13-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-176"><a href="#cb13-176" aria-hidden="true" tabindex="-1"></a><span class="al">![ZotFile preferences](img/zotfile-preferences.png)</span>{width=80% fig-alt="ZotFile preferences"}</span>
<span id="cb13-177"><a href="#cb13-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-178"><a href="#cb13-178" aria-hidden="true" tabindex="-1"></a>I wanted to switch the roles of <span class="in">`-`</span> and <span class="in">`_`</span> and do </span>
<span id="cb13-179"><a href="#cb13-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-180"><a href="#cb13-180" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb13-181"><a href="#cb13-181" aria-hidden="true" tabindex="-1"></a><span class="in">heiss-kelley_2017_between-a-rock-and-a-hard-place.pdf</span></span>
<span id="cb13-182"><a href="#cb13-182" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb13-183"><a href="#cb13-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-184"><a href="#cb13-184" aria-hidden="true" tabindex="-1"></a>…but Zotero and/or ZotFile seems to hardwire <span class="in">`_`</span> as the space replacement in its titles. Oh well.</span>
<span id="cb13-185"><a href="#cb13-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-186"><a href="#cb13-186" aria-hidden="true" tabindex="-1"></a><span class="fu">### Citekeys</span></span>
<span id="cb13-187"><a href="#cb13-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-188"><a href="#cb13-188" aria-hidden="true" tabindex="-1"></a>In BibDesk, I've had a citation key pattern that I've used for years: <span class="in">`Lastname:Year`</span>, with up to three last names for coauthored things, and an incremental lowercase letter in the case of duplicates:</span>
<span id="cb13-189"><a href="#cb13-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-190"><a href="#cb13-190" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb13-191"><a href="#cb13-191" aria-hidden="true" tabindex="-1"></a><span class="in">HeissKelley:2017</span></span>
<span id="cb13-192"><a href="#cb13-192" aria-hidden="true" tabindex="-1"></a><span class="in">HeissKelley:2017a</span></span>
<span id="cb13-193"><a href="#cb13-193" aria-hidden="true" tabindex="-1"></a><span class="in">Imbens:2021</span></span>
<span id="cb13-194"><a href="#cb13-194" aria-hidden="true" tabindex="-1"></a><span class="in">LundbergJohnsonStewart:2021</span></span>
<span id="cb13-195"><a href="#cb13-195" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb13-196"><a href="#cb13-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-197"><a href="#cb13-197" aria-hidden="true" tabindex="-1"></a>Zotero and Better BibTeX preserve citekeys when you import a <span class="in">`.bib`</span> file, but I wanted to make sure I keep using this system for new items I add going forward, so I changed the Better BibTeX preferences to use the same pattern:</span>
<span id="cb13-198"><a href="#cb13-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-199"><a href="#cb13-199" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb13-200"><a href="#cb13-200" aria-hidden="true" tabindex="-1"></a><span class="in">auth(0,1) + auth(0,2) + auth(0,3) + ":" + year</span></span>
<span id="cb13-201"><a href="#cb13-201" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb13-202"><a href="#cb13-202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-203"><a href="#cb13-203" aria-hidden="true" tabindex="-1"></a><span class="al">![Better BibTeX settings](img/bbt-settings.png)</span>{width=90% fig-alt="Better BibTeX settings"}</span>
<span id="cb13-204"><a href="#cb13-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-205"><a href="#cb13-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-206"><a href="#cb13-206" aria-hidden="true" tabindex="-1"></a><span class="fu">## Post-import tweaks</span></span>
<span id="cb13-207"><a href="#cb13-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-208"><a href="#cb13-208" aria-hidden="true" tabindex="-1"></a>With all that initial prep work done, I imported the <span class="in">`.bib`</span> file into my Zotero library (File &gt; Import…). I made sure "Place imported collections and items to new collection" was checked and that files were copied to the Zotero storage folder:</span>
<span id="cb13-209"><a href="#cb13-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-210"><a href="#cb13-210" aria-hidden="true" tabindex="-1"></a><span class="al">![Zotero's import dialog](img/zotero-import.png)</span>{width=90% fig-alt="Zotero's import dialog"}</span>
<span id="cb13-211"><a href="#cb13-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-212"><a href="#cb13-212" aria-hidden="true" tabindex="-1"></a><span class="fu">### Ratings and read status</span></span>
<span id="cb13-213"><a href="#cb13-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-214"><a href="#cb13-214" aria-hidden="true" tabindex="-1"></a>The Tags panel in Zotero then showed all the project/class-specific keywords from BibDesk, in addition to the ratings and read status tags I added previously:</span>
<span id="cb13-215"><a href="#cb13-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-216"><a href="#cb13-216" aria-hidden="true" tabindex="-1"></a><span class="al">![Tags before renaming](img/tags-pre-renaming.png)</span>{width=50% fig-alt="Tags before renaming"}</span>
<span id="cb13-217"><a href="#cb13-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-218"><a href="#cb13-218" aria-hidden="true" tabindex="-1"></a>I renamed each of the <span class="in">`zzz*`</span> rating tags to use emoji stars and renamed the <span class="in">`xxx`</span> read tag to use ✅. </span>
<span id="cb13-219"><a href="#cb13-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-220"><a href="#cb13-220" aria-hidden="true" tabindex="-1"></a><span class="al">![Tags after renaming](img/tags-post-renaming.png)</span>{width=50% fig-alt="Tags after renaming"}</span>
<span id="cb13-221"><a href="#cb13-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-222"><a href="#cb13-222" aria-hidden="true" tabindex="-1"></a>Zotero has the ability to assign tags specific colors and pin them in a specific order, which also makes the tags display in the main Zotero library list. Following <span class="co">[</span><span class="ot">advice from the Zotero Tag extension</span><span class="co">](https://github.com/windingwind/zotero-tag/blob/master/docs/item-star.md)</span>, I pinned the read status ✅  tag as the first tag, the 5-star rating as the second tag, the 4-star rating as the third tag, and so on.</span>
<span id="cb13-223"><a href="#cb13-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-224"><a href="#cb13-224" aria-hidden="true" tabindex="-1"></a>Now the read status and ratings tags are easily accessible and appear directly in the main Zotero library list!</span>
<span id="cb13-225"><a href="#cb13-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-226"><a href="#cb13-226" aria-hidden="true" tabindex="-1"></a><span class="al">![Zotero library with read status and ratings tags](img/library-with-read-ratings.png)</span>{width=100% fig-alt="Zotero library with read status and ratings tags"}</span>
<span id="cb13-227"><a href="#cb13-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-228"><a href="#cb13-228" aria-hidden="true" tabindex="-1"></a><span class="fu">### Tags to collections</span></span>
<span id="cb13-229"><a href="#cb13-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-230"><a href="#cb13-230" aria-hidden="true" tabindex="-1"></a>Zotero has two different methods for categorizing entries—<span class="co">[</span><span class="ot">tags and collections</span><span class="co">](https://www.zotero.org/support/collections_and_tags)</span>—while BibDesk / BibTeX only uses keywords, which Zotero treats as tags. </span>
<span id="cb13-231"><a href="#cb13-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-232"><a href="#cb13-232" aria-hidden="true" tabindex="-1"></a>I decided that in Zotero I'd use both tags and collections. Tags are reserved for things like general topics, ratings, to-read designations, etc., while collections represent specific projects or classes. </span>
<span id="cb13-233"><a href="#cb13-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-234"><a href="#cb13-234" aria-hidden="true" tabindex="-1"></a>I already assigned project- and class-specific keywords in BibDesk, so I just needed to move those keyworded entries into Zotero collections. There's no way (that I could find) to include collection information in the <span class="in">`.bib`</span> file and have it import into Zotero, so I ended up manually creating collections for each of the imported keywords. I filtered the library to only show items from one of the future collections, selected all the items, right-clicked, and chose "Add to collection" &gt; "New collection…" and created a new collection. I then deleted the tag.</span>
<span id="cb13-235"><a href="#cb13-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-236"><a href="#cb13-236" aria-hidden="true" tabindex="-1"></a>For instance, here's what Zotero looked like after I assigned these 6 items, tagged as "Polsci 733", to the new "Polsci 733" collection (shown in the folder in the sidebar). I just had to delete the tag after:</span>
<span id="cb13-237"><a href="#cb13-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-238"><a href="#cb13-238" aria-hidden="true" tabindex="-1"></a><span class="al">![Example of the Polsci 733 tag after being converted to a collection](img/example-733.png)</span>{width=100% fig-alt="Example of the Polsci 733 tag after being converted to a collection"}</span>
<span id="cb13-239"><a href="#cb13-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-240"><a href="#cb13-240" aria-hidden="true" tabindex="-1"></a><span class="fu">### `incollection`  / `inbook` and `crossref`</span></span>
<span id="cb13-241"><a href="#cb13-241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-242"><a href="#cb13-242" aria-hidden="true" tabindex="-1"></a>::: {.callout-tip}</span>
<span id="cb13-243"><a href="#cb13-243" aria-hidden="true" tabindex="-1"></a>This <span class="co">[</span><span class="ot">used to cause problems</span><span class="co">](https://github.com/andrewheiss/ath-quarto/blob/74041ee1b8eab2f1054a4422651f0d49e12137bc/blog/2023/01/08/bibdesk-to-zotero-pandoc/index.qmd#L253)</span> with child references not importing fields from their parents, but <span class="co">[</span><span class="ot">thanks to Emiliano Heynes</span><span class="co">](https://github.com/retorquere/zotero-better-bibtex/issues/2373)</span>, this all works flawlessly if you have verison 6.7.47+ of Better BibTeX installed.</span>
<span id="cb13-244"><a href="#cb13-244" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb13-245"><a href="#cb13-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-246"><a href="#cb13-246" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">BibDesk natively supports the `crossref` field</span><span class="co">](https://bibdesk.sourceforge.io/manual/BibDeskHelp_2.html#SEC18)</span>, which biber and biblatex use when working with LaTeX. This field lets you set up child/parent relationships with items, where children inherit fields from their parents. For instance, consider these two items—an edited book with lots of chapters from different authors and a chapter from that book:</span>
<span id="cb13-247"><a href="#cb13-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-248"><a href="#cb13-248" aria-hidden="true" tabindex="-1"></a><span class="in">```bibtex</span></span>
<span id="cb13-249"><a href="#cb13-249" aria-hidden="true" tabindex="-1"></a><span class="in">@inbook{El-HusseiniToeplerSalamon:2004,</span></span>
<span id="cb13-250"><a href="#cb13-250" aria-hidden="true" tabindex="-1"></a><span class="in">    author = {Hashem El-Husseini and Stefan Toepler and Lester M. Salamon},</span></span>
<span id="cb13-251"><a href="#cb13-251" aria-hidden="true" tabindex="-1"></a><span class="in">    chapter = {12},</span></span>
<span id="cb13-252"><a href="#cb13-252" aria-hidden="true" tabindex="-1"></a><span class="in">    crossref = {SalamonSokolowski:2004},</span></span>
<span id="cb13-253"><a href="#cb13-253" aria-hidden="true" tabindex="-1"></a><span class="in">    pages = {227--32},</span></span>
<span id="cb13-254"><a href="#cb13-254" aria-hidden="true" tabindex="-1"></a><span class="in">    title = {Lebanon}}</span></span>
<span id="cb13-255"><a href="#cb13-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-256"><a href="#cb13-256" aria-hidden="true" tabindex="-1"></a><span class="in">@book{SalamonSokolowski:2004,</span></span>
<span id="cb13-257"><a href="#cb13-257" aria-hidden="true" tabindex="-1"></a><span class="in">    address = {Bloomfield, CT},</span></span>
<span id="cb13-258"><a href="#cb13-258" aria-hidden="true" tabindex="-1"></a><span class="in">    editor = {Lester M. Salamon and S. Wojciech Sokolowski},</span></span>
<span id="cb13-259"><a href="#cb13-259" aria-hidden="true" tabindex="-1"></a><span class="in">    publisher = {Kumarian Press},</span></span>
<span id="cb13-260"><a href="#cb13-260" aria-hidden="true" tabindex="-1"></a><span class="in">    title = {Global Civil Society: Dimensions of the Nonprofit Sector},</span></span>
<span id="cb13-261"><a href="#cb13-261" aria-hidden="true" tabindex="-1"></a><span class="in">    volume = {2},</span></span>
<span id="cb13-262"><a href="#cb13-262" aria-hidden="true" tabindex="-1"></a><span class="in">    year = {2004}}</span></span>
<span id="cb13-263"><a href="#cb13-263" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb13-264"><a href="#cb13-264" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-265"><a href="#cb13-265" aria-hidden="true" tabindex="-1"></a>In BibDesk, the chapter displays like this:</span>
<span id="cb13-266"><a href="#cb13-266" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-267"><a href="#cb13-267" aria-hidden="true" tabindex="-1"></a><span class="al">![BibDesk editor window for a book chapter that inherits its parent book's attributes](img/bibdesk-crossref.png)</span>{width=100% fig-alt="BibDesk editor window for a book chapter that inherits its parent book's attributes"}</span>
<span id="cb13-268"><a href="#cb13-268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-269"><a href="#cb13-269" aria-hidden="true" tabindex="-1"></a>Fields like book title, publisher, year, etc., are all greyed out because they're inherited from the parent book, with the citekey <span class="in">`SalamonSokolowski:2004`</span></span>
<span id="cb13-270"><a href="#cb13-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-271"><a href="#cb13-271" aria-hidden="true" tabindex="-1"></a>If you install version 6.7.47+ of the <span class="co">[</span><span class="ot">Better BibTeX</span><span class="co">](https://retorque.re/zotero-better-bibtex/)</span> add-on, the chapter will inherit all the information from its parent book—the book title, date, publisher, etc., will all be imported correctly:</span>
<span id="cb13-272"><a href="#cb13-272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-273"><a href="#cb13-273" aria-hidden="true" tabindex="-1"></a><span class="al">![Cross referenced parent attributes in Zotero are imported correctly](img/correct-crossref-fields.png)</span>{width=50% fig-alt="Cross referenced parent attributes in Zotero are imported correctly"}</span>
<span id="cb13-274"><a href="#cb13-274" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-275"><a href="#cb13-275" aria-hidden="true" tabindex="-1"></a><span class="fu">### All done!</span></span>
<span id="cb13-276"><a href="#cb13-276" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-277"><a href="#cb13-277" aria-hidden="true" tabindex="-1"></a>And with that, I have a complete version of my 15-year-old <span class="in">`references.bib`</span> file inside Zotero!</span>
<span id="cb13-278"><a href="#cb13-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-279"><a href="#cb13-279" aria-hidden="true" tabindex="-1"></a><span class="al">![Complete Zotero library](img/zotero-final.png)</span>{width=100% fig-alt="Complete Zotero library"}</span>
<span id="cb13-280"><a href="#cb13-280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-281"><a href="#cb13-281" aria-hidden="true" tabindex="-1"></a><span class="fu">## Example workflow with Quarto / R Markdown / pandoc</span></span>
<span id="cb13-282"><a href="#cb13-282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-283"><a href="#cb13-283" aria-hidden="true" tabindex="-1"></a>Part of the reason I've been hesitant to switch away from BibDesk for so long is because I couldn't figure out a way to connect a Markdown document to my Zotero database. With documents that get parsed through pandoc (like R Markdown or Quarto), you add a line in the YAML front matter to specify what file contains your references:</span>
<span id="cb13-284"><a href="#cb13-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-285"><a href="#cb13-285" aria-hidden="true" tabindex="-1"></a><span class="in">```yaml</span></span>
<span id="cb13-286"><a href="#cb13-286" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb13-287"><a href="#cb13-287" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> Whatever</span></span>
<span id="cb13-288"><a href="#cb13-288" aria-hidden="true" tabindex="-1"></a><span class="fu">author</span><span class="kw">:</span><span class="at"> Whoever</span></span>
<span id="cb13-289"><a href="#cb13-289" aria-hidden="true" tabindex="-1"></a><span class="fu">bibliography</span><span class="kw">:</span><span class="at"> references.bib</span></span>
<span id="cb13-290"><a href="#cb13-290" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb13-291"><a href="#cb13-291" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb13-292"><a href="#cb13-292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-293"><a href="#cb13-293" aria-hidden="true" tabindex="-1"></a>Since Zotero keeps everything in one big database, I didn't see a way to add something like <span class="in">`bibliography: My Zotero Database`</span> to the YAML front matter—pandoc requires that you point to a plain text file like <span class="in">`.bib`</span> or <span class="in">`.json`</span>  or <span class="in">`.yml`</span>, not a Zotero database.</span>
<span id="cb13-294"><a href="#cb13-294" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-295"><a href="#cb13-295" aria-hidden="true" tabindex="-1"></a>However, the <span class="co">[</span><span class="ot">magical Better BibTeX add-on</span><span class="co">](https://retorque.re/zotero-better-bibtex/)</span> clarified everything for me and makes it super easy to point pandoc at a single file that contains a collection of reference items.</span>
<span id="cb13-296"><a href="#cb13-296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-297"><a href="#cb13-297" aria-hidden="true" tabindex="-1"></a><span class="fu">### Export collection to `.bib` file</span></span>
<span id="cb13-298"><a href="#cb13-298" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-299"><a href="#cb13-299" aria-hidden="true" tabindex="-1"></a>First, create a collection of items that you want to cite in your writing project. Since collections are like playlists and items can belong to multiple collections, there's no need to manage duplicate entries or anything (like I was running into with <span class="co">[</span><span class="ot">Problem 2 above</span><span class="co">](#problem-2-collaboration-across-many-projects-with-many-coauthors)</span>).</span>
<span id="cb13-300"><a href="#cb13-300" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-301"><a href="#cb13-301" aria-hidden="true" tabindex="-1"></a>Right click on the collection name and choose "Export collection…". </span>
<span id="cb13-302"><a href="#cb13-302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-303"><a href="#cb13-303" aria-hidden="true" tabindex="-1"></a><span class="al">![Exporting a Zotero collection](img/export-collection.png)</span>{width=70% fig-alt="Exporting a Zotero collection"}</span>
<span id="cb13-304"><a href="#cb13-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-305"><a href="#cb13-305" aria-hidden="true" tabindex="-1"></a>Change the format to "Better BibLaTeX", check "Keep updated", and choose a place to save the resulting <span class="in">`.bib`</span> file.</span>
<span id="cb13-306"><a href="#cb13-306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-307"><a href="#cb13-307" aria-hidden="true" tabindex="-1"></a><span class="al">![Changing the export format](img/export-format.png)</span>{width=60% fig-alt="Changing the export format"}</span>
<span id="cb13-308"><a href="#cb13-308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-309"><a href="#cb13-309" aria-hidden="true" tabindex="-1"></a>::: {.callout-tip}</span>
<span id="cb13-310"><a href="#cb13-310" aria-hidden="true" tabindex="-1"></a>You could also export it as "Better CSL JSON" or "Better CSL YAML", which would create a <span class="in">`.json`</span> or <span class="in">`.yml`</span> file that you could then point to in your YAML front matter, which would keep everything in CSL format instead of converting things to <span class="in">`.bib`</span> and back again (see <span class="co">[</span><span class="ot">Problem 3 above</span><span class="co">](#problem-3-bibtex-was-designed-for-latexbut-just-latex)</span>). However, in my academic writing projects I still like to let LaTeX, BibLaTeX, and biber handle the citation generation instead of pandoc *for PDFs*, so I still rely on <span class="in">`.bib`</span> files. But if you're not converting to PDF, or if you're letting the CSL style template handle the citations instead of BibLaTeX, <span class="co">[</span><span class="ot">you should probably keep everything as JSON or YAML</span><span class="co">](https://retorque.re/zotero-better-bibtex/exporting/pandoc/)</span> instead of <span class="in">`.bib`</span>.</span>
<span id="cb13-311"><a href="#cb13-311" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb13-312"><a href="#cb13-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-313"><a href="#cb13-313" aria-hidden="true" tabindex="-1"></a>The "Keep updated" option is the magical part of this whole thing. If you add an item or edit an existing item in the collection in Zotero, **Better BibTeX will automatically re-export the collection** to the <span class="in">`.bib`</span> file. You can have one central repository of citations and lots of dynamically updated plain text <span class="in">`.bib`</span> files that you don't have to edit or keep track of. Truly magical.</span>
<span id="cb13-314"><a href="#cb13-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-315"><a href="#cb13-315" aria-hidden="true" tabindex="-1"></a><span class="fu">### Point the `.qmd` / `.Rmd` / `.md` to the exported file</span></span>
<span id="cb13-316"><a href="#cb13-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-317"><a href="#cb13-317" aria-hidden="true" tabindex="-1"></a>You'll now have a <span class="in">`.bib`</span> file that contains all the references that you can cite. Put that filename in your front matter (use <span class="in">`.json`</span> or <span class="in">`.yml`</span> if you export the file as JSON or YAML instead):</span>
<span id="cb13-318"><a href="#cb13-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-319"><a href="#cb13-319" aria-hidden="true" tabindex="-1"></a><span class="in">```yaml</span></span>
<span id="cb13-320"><a href="#cb13-320" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb13-321"><a href="#cb13-321" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> Whatever</span></span>
<span id="cb13-322"><a href="#cb13-322" aria-hidden="true" tabindex="-1"></a><span class="fu">author</span><span class="kw">:</span><span class="at"> Whoever</span></span>
<span id="cb13-323"><a href="#cb13-323" aria-hidden="true" tabindex="-1"></a><span class="fu">bibliography</span><span class="kw">:</span><span class="at"> name_of_file_you_exported_from_zotero.bib</span></span>
<span id="cb13-324"><a href="#cb13-324" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb13-325"><a href="#cb13-325" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb13-326"><a href="#cb13-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-327"><a href="#cb13-327" aria-hidden="true" tabindex="-1"></a><span class="fu">### Cite things</span></span>
<span id="cb13-328"><a href="#cb13-328" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-329"><a href="#cb13-329" aria-hidden="true" tabindex="-1"></a>Cite things <span class="co">[</span><span class="ot">like normal</span><span class="co">](https://quarto.org/docs/authoring/footnotes-and-citations.html#sec-citations)</span>. </span>
<span id="cb13-330"><a href="#cb13-330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-331"><a href="#cb13-331" aria-hidden="true" tabindex="-1"></a>Because the front matter is pointed at a plain text <span class="in">`.bib`</span> file that contains all the bibliographic references, it'll generate the citations correctly. And because Better BibTeX is configured to automatically update the exported plain text file, any changes you make in Zotero will automatically be reflected. Again, this is magic.</span>
<span id="cb13-332"><a href="#cb13-332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-333"><a href="#cb13-333" aria-hidden="true" tabindex="-1"></a><span class="al">![Visual Studio Code with a Quarto Markdown file configured to look at an auto-updating .bib file exported from Zotero](img/vscode-output.png)</span>{width=100% fig-alt="Visual Studio Code with a Quarto Markdown file configured to look at an auto-updating .bib file exported from Zotero"}</span>
<span id="cb13-334"><a href="#cb13-334" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-335"><a href="#cb13-335" aria-hidden="true" tabindex="-1"></a><span class="fu">### RStudio-based alternative</span></span>
<span id="cb13-336"><a href="#cb13-336" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-337"><a href="#cb13-337" aria-hidden="true" tabindex="-1"></a>Alternatively, if you write in RStudio, you can connect RStudio to your Zotero database and have it do a similar auto-export thing. You can also tell it to use Better BibTeX to keep things automatically synced:</span>
<span id="cb13-338"><a href="#cb13-338" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-339"><a href="#cb13-339" aria-hidden="true" tabindex="-1"></a><span class="al">![RStudio preferences pane for enabling Zotero](img/rstudio-zotero.png)</span>{width=80% fig-alt="RStudio preferences pane for enabling Zotero"}</span>
<span id="cb13-340"><a href="#cb13-340" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-341"><a href="#cb13-341" aria-hidden="true" tabindex="-1"></a>*([See here for more details about Zotero citations in RStudio](https://rstudio.github.io/visual-markdown-editing/citations.html))*</span>
<span id="cb13-342"><a href="#cb13-342" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-343"><a href="#cb13-343" aria-hidden="true" tabindex="-1"></a>One extra nice thing about using RStudio is its <span class="co">[</span><span class="ot">fancy Insert Citation dialog</span><span class="co">](https://rstudio.github.io/visual-markdown-editing/citations.html#inserting-citations)</span>, which makes adding citations in Markdown just like adding citations in Word or Google Docs. It only works in the Visual Markdown Editor, though, which I don't normally use, so I just use Better BibTeX alone rather than RStudio's Zotero connection when I write in RStudio.</span></code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p><span class="faux-block"><i class="fa-brands fa-creative-commons" aria-label="creative-commons"></i> 2007–2024 Andrew Heiss</span> <span class="faux-block">All content licensed under<br><a href="https://creativecommons.org/licenses/by/4.0/"><i class="fa-brands fa-creative-commons" aria-label="creative-commons"></i> <i class="fa-brands fa-creative-commons-by" aria-label="creative-commons-by"></i> Creative Commons CC BY 4.0</a></span></p>
</div>   
    <div class="nav-footer-center">
<p><span class="faux-block"><i class="fa-brands fa-orcid" aria-label="orcid"></i> <strong>ORCID</strong> <a href="https://orcid.org/0000-0002-3948-3914">0000-0002-3948-3914</a></span> <span class="faux-block"><i class="fa-solid fa-key" aria-label="key"></i> <a href="../../../../../pgp_ath.asc.txt">PGP public key</a>   <i class="fa-solid fa-fingerprint" aria-label="fingerprint"></i> Fingerprint:<br><span class="fingerprint">4AA2 FA83 A8B2 05A4 E30F<br> 610D 1382 6216 9178 36AB</span></span></p>
</div>
    <div class="nav-footer-right">
<p><span class="faux-block">Made with <i class="fa-brands fa-r-project" aria-label="r-project"></i> and <a href="https://quarto.org/">Quarto</a></span> <span class="faux-block"><a href="https://github.com/andrewheiss/ath-quarto">View the source at <i class="fa-brands fa-github" aria-label="github"></i> GitHub</a></span></p>
</div>
  </div>
</footer>


</body></html>